<!-- src/app/features/pages/ventas/detalle-venta/detalle-venta.component.html -->
<div class="detalle-venta-container">
  <!-- Header -->
  <div class="header">
    <button (click)="volverAPanel()" class="btn-back">â† Volver al Panel</button>
    <h1>ğŸ“„ Detalle de Venta #{{venta?.id_venta}}</h1>
    <button (click)="imprimirComprobante()" class="btn-print">
      ğŸ–¨ï¸ Imprimir
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <p>ğŸ”„ Cargando detalle de venta...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error && !loading" class="error-message">
    {{ error }}
  </div>

  <!-- Venta no encontrada -->
  <div *ngIf="notFound" class="not-found">
    <h2>ğŸ˜” Venta no encontrada</h2>
    <p>La venta que buscas no existe o fue eliminada.</p>
    <button (click)="volverAPanel()" class="btn-primary">Volver al Panel</button>
  </div>

  <!-- Detalle de la venta - DISEÃ‘O COMPACTO -->
  <div *ngIf="venta && !loading" class="venta-detalle-compacto">
    
    <!-- Fila 1: InformaciÃ³n del cliente y productos -->
    <div class="fila-principal">
      <!-- InformaciÃ³n del cliente -->
      <div class="seccion info-cliente-compacto">
        <h2>ğŸ‘¤ InformaciÃ³n del Cliente</h2>
        <div class="cliente-datos-compacto">
          <div class="cliente-nombre">{{ venta.nombre_completo || 'Cliente' }}</div>
          <div class="cliente-contacto-compacto">
            <span *ngIf="venta.telefono" class="contacto-item">ğŸ“ {{ venta.telefono }}</span>
            <span *ngIf="venta.direccion" class="contacto-item">ğŸ“ {{ venta.direccion }}</span>
          </div>
        </div>
      </div>

      <!-- Detalles de productos -->
      <div class="seccion productos-compacto">
        <h2>ğŸ“¦ Productos Vendidos</h2>
        <div class="productos-lista">
          <div *ngFor="let detalle of venta.detalles" class="producto-item">
            <span class="producto-nombre">{{ detalle.producto_nombre }}</span>
            <span class="producto-cantidad">{{ detalle.cantidad }} und</span>
            <span class="producto-precio">S/{{ detalle.precio_unitario }}</span>
            <span class="producto-subtotal">S/{{ detalle.cantidad * detalle.precio_unitario }}</span>
          </div>
        </div>
        <div class="total-productos">
          <strong>Total: S/ {{ venta.total }}</strong>
        </div>
      </div>
    </div>

    <!-- Fila 2: InformaciÃ³n general y adicional -->
    <div class="fila-secundaria">
      <!-- InformaciÃ³n general -->
      <div class="seccion info-general-compacto">
        <h2>ğŸ“‹ InformaciÃ³n General</h2>
        <div class="info-grid-compacto">
          <div class="info-item-compacto">
            <label>Fecha:</label>
            <span class="info-valor">{{ formatearFecha(venta.fecha) }}</span>
          </div>
          <div class="info-item-compacto">
            <label>Hora:</label>
            <span class="info-valor">{{ formatearHora(venta.hora) }}</span>
          </div>
          <div class="info-item-compacto">
            <label>Estado:</label>
            <span [class]="'estado-badge ' + getEstadoClass(venta.estado || '')">
              {{ venta.estado }}
            </span>
          </div>
          <div class="info-item-compacto">
            <label>MÃ©todo Pago:</label>
            <span class="info-valor metodo-pago">{{ venta.metodo_pago }}</span>
          </div>
        </div>
      </div>

      <!-- InformaciÃ³n adicional -->
      <div class="seccion info-adicional-compacto">
        <h2>ğŸ“ InformaciÃ³n Adicional</h2>
        <div class="adicional-grid-compacto">
          <div class="info-item-compacto">
            <label>Vendedor:</label>
            <span class="info-valor">{{ venta.vendedor || 'Sistema' }}</span>
          </div>
          <div class="info-item-compacto" *ngIf="venta.repartidor">
            <label>Repartidor:</label>
            <span class="info-valor">{{ venta.repartidor }}</span>
          </div>
          <div class="info-item-compacto full-width" *ngIf="venta.notas">
            <label>Notas:</label>
            <span class="notas-text">{{ venta.notas }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>